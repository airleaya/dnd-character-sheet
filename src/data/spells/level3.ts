// src/data/spells/level3.ts
import type { SpellDefinition } from '../../types/Spell';

export const LEVEL_3_SPELLS: SpellDefinition[] = [
  // ==========================================
  // 防护系 (Abjuration)
  // ==========================================
  {
    id: 'beacon_of_hope',
    name: '希望灯塔',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '任意数量的生物',
    attackType: 'none',
    description: '<p>此法术赐予希望与活力。选择射程内任意数量的生物。在法术持续期间，每个目标进行感知豁免和死亡豁免时具有优势，且接受任何治疗时均恢复最大可能的生命值。</p>',
    scaling: '无',
    classes: ['cleric'], // 暂不含圣武士(奉献之誓)
    cantripScaling: false
  },
  {
    id: 'counterspell',
    name: '法术反制',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 反应',
    range: '60 尺',
    components: { v: false, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '一个正在施法的生物',
    attackType: 'none',
    description: '<p>当你看见射程内一个生物正在施法时，你可以利用反应尝试打断该过程。如果该生物正在施展 3 环或更低环阶的法术，则该法术失败且无任何效果。</p><p>如果它正在施展 4 环或更高环阶的法术，你需要进行一次施法关键属性检定。DC 等于 10 + 该法术的环阶。若检定成功，该法术失败且无任何效果。</p>',
    scaling: '当你使用 4 环或更高环阶的法术位施展此法术时，若目标法术环阶不高于你使用的法术位环阶，则自动反制成功（无需检定）。',
    classes: ['sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'dispel_magic',
    name: '解除魔法',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '一个生物、物体或魔法效应',
    attackType: 'none',
    description: '<p>选择射程内一个生物、物体或魔法效应。目标身上任何 3 环或更低环阶的法术结束。对于每个 4 环或更高环阶的法术，你需要进行一次施法关键属性检定。DC 等于 10 + 该法术的环阶。若检定成功，该法术结束。</p>',
    scaling: '4环及以上(若目标法术环阶不高于你使用的法术位环阶，则自动解除)',
    classes: ['bard', 'cleric', 'druid', 'paladin', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'glyph_of_warding',
    name: '守卫刻文',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 小时',
    range: '触及',
    components: { v: true, s: true, m: '熏香和价值至少200gp的钻石粉末，法术会消耗掉' },
    concentration: false,
    duration: '永久',
    target: '10尺直径表面或物体内',
    attackType: 'save',
    saveAttr: 'dex',
    description: '<p>你刻下一个稍后会释放魔法效果的刻文。你可以将其刻在表面上（如桌子、地板或墙壁的一部分）或可闭合的物体内（如书、卷轴或宝箱）。刻文覆盖范围直径不超过 10 尺。若物体被移动超过 10 尺，刻文破损，法术结束。</p><p>刻文几乎隐形，需要成功通过智力（调查）检定（对抗你的法术 DC）才能发现。施法时设定触发条件（如触摸、打开、靠近等）。一旦触发，法术结束。</p><p>你可以选择以下两种效果之一：</p><ul><li><b>爆炸符文 (Explosive Runes)</b>：爆发 20 尺半径球状能量。区域内生物进行敏捷豁免，失败受 5d8 点强酸、冷冻、火焰、闪电或雷鸣伤害（施法时选择），成功减半。</li><li><b>法术刻文 (Spell Glyph)</b>：你可以将一个 3 环或更低环阶的准备好的法术存入刻文。该法术必须针对单一生物或区域。触发时，存入的法术被施放。</li></ul>',
    scaling: '4环及以上(爆炸伤害每高一环+1d8；法术刻文可存入对应环阶法术)',
    classes: ['bard', 'cleric', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'intellect_fortress',
    name: '智力堡垒',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: false, m: null },
    concentration: true,
    duration: '1 小时',
    target: '一个自愿生物',
    attackType: 'none',
    description: '<p>在法术持续期间，你或射程内一个你看得见的自愿生物对心灵伤害具有抗性，且在进行智力、感知和魅力豁免时具有优势。</p>',
    scaling: '4环及以上(每高一环多指定一个目标)',
    classes: ['bard', 'sorcerer', 'warlock', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'magic_circle',
    name: '防护法阵',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 分钟',
    range: '10 尺',
    components: { v: true, s: true, m: '圣水或银粉与铁粉，价值至少100gp，法术会消耗掉' },
    concentration: false,
    duration: '1 小时',
    target: '10尺半径圆柱体',
    attackType: 'save',
    saveAttr: 'cha',
    description: '<p>你在射程内地面上创造出一个半径 10 尺、高 20 尺的魔法能量圆柱。选择以下生物类型之一：天界、元素、精类、邪魔或不死生物。法阵以以下方式影响选定类型的生物：</p><ul><li>无法通过非魔法手段自愿进入圆柱。试图传送进入需通过魅力豁免。</li><li>对圆柱内目标的攻击检定具有劣势。</li><li>圆柱内目标不会被该类生物魅惑、恐慌或附体。</li></ul><p>施法时你也可以反向使用魔法，将生物困在圆柱内。</p>',
    scaling: '4环及以上(每高一环持续时间+1小时)',
    classes: ['cleric', 'paladin', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'nondetection',
    name: '回避侦测',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '一撮钻石尘，价值25gp，洒在目标上，法术会消耗掉' },
    concentration: false,
    duration: '8 小时',
    target: '一个生物或物体',
    attackType: 'none',
    description: '<p>在法术持续期间，你对触碰的一个目标（自愿生物，或各维度不超过 10 尺的物体）隐藏，使其免受预言系魔法侦测。目标无法被任何预言法术锁定，也无法被魔法探知传感器感知。</p>',
    scaling: '无',
    classes: ['bard', 'ranger', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'protection_from_energy',
    name: '防护能量',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 小时',
    target: '一个自愿生物',
    attackType: 'none',
    description: '<p>你触碰一个自愿生物。在法术持续期间，该生物对你选择的以下一种伤害类型具有抗性：酸蚀、冷冻、火焰、闪电或雷鸣。</p>',
    scaling: '无',
    classes: ['cleric', 'druid', 'ranger', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'remove_curse',
    name: '移除诅咒',
    level: 3,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '一个生物或物体',
    attackType: 'none',
    description: '<p>通过你的触碰，影响一个生物或物体的所有诅咒随之结束。如果该物体是受诅咒的魔法物品，其诅咒依然保留，但法术会切断所有者的同调，使其可以被移除或丢弃。</p>',
    scaling: '无',
    classes: ['cleric', 'paladin', 'warlock', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 咒法系 (Conjuration)
  // ==========================================
  {
    id: 'call_lightning',
    name: '召雷术',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '10 分钟',
    target: '5尺半径范围',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '3d10',
    damageType: 'lightning',
    description: '<p>一团乌云出现在射程内你可见的一点正上方，形成高 10 尺、半径 60 尺的圆柱状风暴云。若空间不足以容纳云团，法术失败。</p><p>施法时，你选择云层下方你可见的一点。一道闪电从云中劈向该点。该点周围 5 尺内的每个生物必须进行敏捷豁免。失败者受到 3d10 点闪电伤害，成功者减半。在法术结束前的每回合，你可以用动作再次召下闪电攻击同一点或另一点。</p><p>若你在户外且已有风暴天气时施展此法术，你夺取现有风暴的控制权而非创造新云团。在此情况下，伤害增加 1d10。</p>',
    scaling: '4环及以上(每高一环伤害+1d10)',
    classes: ['druid', 'sorcerer'], // 暴风牧师等子职业通常自动获得
    cantripScaling: false
  },
  {
    id: 'conjure_animals',
    name: '召唤动物',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 小时',
    target: '见描述',
    attackType: 'none',
    description: '<p>你召唤出以野兽形态出现的精魂。它们出现在射程内你可见的未被占据空间。选择以下一种组合：</p><ul><li>一只挑战等级 2 或更低的野兽</li><li>两只挑战等级 1 或更低的野兽</li><li>四只挑战等级 1/2 或更低的野兽</li><li>八只挑战等级 1/4 或更低的野兽</li></ul><p>野兽视为精类生物，生命值降至 0 或法术结束时消失。它们对你和同伴友善，作为一个群体进行先攻并有自己的回合。它们听从你的口头命令（无须动作），若无命令则仅执行卫戍及闪避动作。具体数据由 DM 决定。</p>',
    scaling: '5环(数量翻倍), 7环(三倍), 9环(四倍)',
    classes: ['druid', 'ranger'],
    cantripScaling: false
  },
  {
    id: 'conjure_barrage',
    name: '召唤弹幕',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: '一件弹药或投掷武器' },
    concentration: false,
    duration: '立即',
    target: '60尺锥状区域',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '3d8',
    // damageType: 'varied', // 取决于武器
    description: '<p>你向空中射出一件非魔法弹药或投掷出一件非魔法投掷武器，制造出无数相同的复制品形成的锥状弹幕。60 尺锥状区域内的每个生物必须进行敏捷豁免。失败者受到 3d8 点伤害，成功者减半。伤害类型与作为材料的武器或弹药相同。</p>',
    scaling: '无',
    classes: ['ranger'],
    cantripScaling: false
  },
  {
    id: 'create_food_and_water',
    name: '创造饮食',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '创造食物和水',
    attackType: 'none',
    description: '<p>你在地面或容器中创造出 45 磅食物和 30 加仑水，足以维持至多 15 个类人生物或 5 匹坐骑 24 小时的饮食。食物淡而无味但有营养，若未食用会在 24 小时后腐坏。水是洁净的且不会变质。</p>',
    scaling: '无',
    classes: ['cleric', 'paladin'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'hunger_of_hadar',
    name: '哈达之欲',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '150 尺',
    components: { v: true, s: true, m: '一条腌制的章鱼触须' },
    concentration: true,
    duration: '1 分钟',
    target: '20尺半径球状区域',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '2d6', // 混合伤害
    description: '<p>你开启一道通往群星之间黑暗虚空的传送门。射程内一点出现 20 尺半径的黑冷球体。区域内充满诡异的低语和吮吸声（30 尺可闻）。任何光照无法照亮该区域，区域内完全黑暗，其中的生物视为目盲。</p><p>该虚空扭曲空间，视为困难地形。在区域内开始回合的生物受到 2d6 点冷冻伤害。在区域内结束回合的生物必须进行敏捷豁免，失败则受到 2d6 点酸蚀伤害（被异界触手触碰）。</p>',
    scaling: '无',
    classes: ['warlock'],
    cantripScaling: false
  },
  {
    id: 'sleet_storm',
    name: '暴风雪',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '150 尺',
    components: { v: true, s: true, m: '一撮灰尘和几滴水' },
    concentration: true,
    duration: '1 分钟',
    target: '40尺半径圆柱体',
    attackType: 'save',
    saveAttr: 'dex',
    description: '<p>冻雨和随之而来的雨夹雪覆盖射程内一点周围半径 40 尺、高 20 尺的圆柱状区域。该区域被重度遮蔽，且暴露的火焰会被浇灭。</p><p>地面覆盖滑溜的冰层，变为困难地形。当生物在回合内首次进入该区域或在其中开始回合时，必须进行敏捷豁免，失败则倒地（伏地）。若生物在区域内开始回合且正在专注施法，必须进行体质豁免（对抗你的法术 DC），失败则失去专注。</p>',
    scaling: '无',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'spirit_guardians',
    name: '灵体守卫',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '自身 (15尺半径)',
    components: { v: true, s: true, m: '一个圣徽' },
    concentration: true,
    duration: '10 分钟',
    target: '自身周围区域',
    attackType: 'save',
    saveAttr: 'wis',
    damage: '3d8',
    damageType: 'radiant', // 或 necrotic
    description: '<p>你唤来精魂保护自己，它们在你周围 15 尺范围内飞舞。若你为善良或中立，精魂呈天使或精类形态（光耀伤害）；若你为邪恶，呈邪魔形态（黯蚀伤害）。</p><p>施法时你可以指定任意生物不受影响。受影响生物在区域内速度减半。当生物在回合内首次进入区域或在其中开始回合，必须进行感知豁免。失败者受到 3d8 点伤害，成功者减半。</p>',
    scaling: '4环及以上(每高一环伤害+1d8)',
    classes: ['cleric'], // 暂不含圣武士(王冠之誓)
    cantripScaling: false
  },
  {
    id: 'stinking_cloud',
    name: '臭云术',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '90 尺',
    components: { v: true, s: true, m: '一枚臭鸡蛋或几片臭菘叶' },
    concentration: true,
    duration: '1 分钟',
    target: '20尺半径球状区域',
    attackType: 'save',
    saveAttr: 'con',
    description: '<p>你在射程内创造出一团半径 20 尺的恶臭黄云。云雾绕过转角，造成重度遮蔽。</p><p>任何在回合开始时完全位于云雾内的生物必须进行体质豁免（对抗毒素）。失败者将消耗其动作进行呕吐和踉跄。不需要呼吸或免疫毒素的生物自动成功。强风（至少 20 英里/小时）可在 1 轮内吹散云雾。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'summon_fey',
    name: '召唤精类',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '90 尺',
    components: { v: true, s: true, m: '一朵镀金的花，价值至少300gp' },
    concentration: true,
    duration: '1 小时',
    target: '召唤一个精类精魂',
    attackType: 'none',
    description: '<p>你唤来一个精类精魂。它显现在射程内你可见的一处未被占据空间。该实体形态使用“精类精魂”的数据板。施法时，你选择情绪：暴怒 (Fuming)、欢欣 (Mirthful) 或狡黠 (Tricksy)。该情绪决定了数据板中的一项特质。</p><p>该生物对你和同伴友善。在战斗中，它和你共享先攻，但紧随你的回合后行动。它听从你的口头命令（无须动作）。</p>',
    scaling: '4环及以上(提升精魂数据板中的等级)',
    classes: ['druid', 'ranger', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'summon_lesser_demons',
    name: '召唤劣魔',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: '一小瓶过去24小时内被杀死的类人生物血液' },
    concentration: true,
    duration: '1 小时',
    target: '召唤多个恶魔',
    attackType: 'none',
    description: '<p>你念出邪恶词句，从无底深渊召唤恶魔。掷 d6 决定召唤内容：<ul><li><b>1-2</b>：2d4 只原魔 (Manes) 或怯魔 (Dretches)</li><li><b>3-4</b>：1d6 只原魔或怯魔</li><li><b>5-6</b>：1d4 只挑战等级 1 或更低的恶魔</li></ul><p>DM 选择具体的恶魔种类。它们出现在射程内未被占据空间。恶魔对包括你在内的所有生物敌对，会攻击最近的非恶魔生物。</p><p>作为施法的一部分，你可以用作为材料的血液在地面画一个圈包围自己。在法术持续期间，召唤出的恶魔无法进入圈内或伤害圈内生物。</p>',
    scaling: '6-7环(数量翻倍), 8-9环(三倍)',
    classes: ['warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'summon_shadowspawn',
    name: '召唤阴影衍体',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '90 尺',
    components: { v: true, s: true, m: '封在宝石内的眼泪，价值至少300gp' },
    concentration: true,
    duration: '1 小时',
    target: '召唤一个阴影精魂',
    attackType: 'none',
    description: '<p>你唤来一个阴影精魂。它显现在射程内你可见的一处未被占据空间。该实体形态使用“阴影精魂”的数据板。施法时，你选择一种情感：狂怒 (Fury)、绝望 (Despair) 或恐惧 (Fear)。该情感决定了数据板中的一项特质。</p><p>该生物对你和同伴友善。在战斗中，它和你共享先攻，但紧随你的回合后行动。它听从你的口头命令（无须动作）。</p>',
    scaling: '4环及以上(提升精魂数据板中的等级)',
    classes: ['warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'thunder_step',
    name: '雷步',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '90 尺',
    components: { v: true, s: false, m: null },
    concentration: false,
    duration: '立即',
    target: '自身及10尺范围',
    attackType: 'save',
    saveAttr: 'con',
    damage: '3d10',
    damageType: 'thunder',
    description: '<p>你传送至射程内你可见的一处未被占据空间。在你消失后，原位置立即爆发雷鸣般的轰响。你原位置 10 尺内的每个生物必须进行体质豁免。失败者受到 3d10 点雷鸣伤害，成功者减半。轰响声 300 尺可闻。</p><p>你可以携带不超过负重上限的物品。你还可以带同一个在你周围 5 尺内、体型不大于你且自愿的生物（及其装备）。该生物会出现在你目的地的 5 尺内。</p>',
    scaling: '4环及以上(每高一环伤害+1d10)',
    classes: ['sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'tidal_wave',
    name: '潮涌术',
    level: 3,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: '一滴水' },
    concentration: false,
    duration: '立即',
    target: '区域内生物',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '4d8',
    damageType: 'bludgeoning',
    description: '<p>你召唤出一波浪潮冲击射程内一片区域。区域长至多 30 尺，宽至多 10 尺，高至多 10 尺。区域内每个生物必须进行敏捷豁免。失败者受到 4d8 点钝击伤害并被击倒（倒地）。成功者伤害减半且不被击倒。水随后向四面八方扩散，熄灭区域内及周围 30 尺内的无保护火焰，随后消失。</p>',
    scaling: '无',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 预言系 (Divination)
  // ==========================================
  {
    id: 'clairvoyance',
    name: '锐耳术/透视术',
    level: 3,
    school: 'divination',
    ritual: false,
    castingTime: '10 分钟',
    range: '1 英里',
    components: { v: true, s: true, m: '价值至少 100gp 的器材（听觉需镶宝石的号角，视觉需玻璃眼球）' },
    concentration: true,
    duration: '10 分钟',
    target: '创造一个隐形传感器',
    attackType: 'none',
    description: '<p>你在射程内一个你熟悉的地点（你曾去过或见过的地方）或一个明显的陌生地点（如门后、转角处或树丛中）创造一个隐形的魔法传感器。传感器在法术持续期间保持在原位，无法被攻击或互动。</p><p>施法时，你选择视觉或听觉。你可以通过该传感器使用选定的感官，如同你位于该位置一样（这意味着如果你拥有黑暗视觉，你可以通过传感器使用它）。作为动作，你可以在视觉和听觉之间切换。</p><p>能看见隐形物体的生物（如拥有<i>识破隐形</i>或<i>真实视觉</i>）会看到传感器是一个拳头大小的发光、无实体球体。</p>',
    scaling: '无',
    classes: ['bard', 'cleric', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'tongues',
    name: '巧舌术',
    level: 3,
    school: 'divination',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: false, m: '一个小型的粘土金字塔模型' },
    concentration: false,
    duration: '1 小时',
    target: '一个生物',
    attackType: 'none',
    description: '<p>该法术赋予你触碰的生物理解其听到的任何口语的能力。此外，当目标说话时，任何懂至少一种语言且能听到目标的生物都能理解其所说的话。</p>',
    scaling: '无',
    classes: ['bard', 'cleric', 'paladin', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 惑控系 (Enchantment)
  // ==========================================
  {
    id: 'catnap',
    name: '猫之小憩',
    level: 3,
    school: 'enchantment',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: false, s: true, m: '一撮沙子' },
    concentration: false,
    duration: '10 分钟',
    target: '至多3个自愿生物',
    attackType: 'none',
    description: '<p>你做出一个安抚的手势。射程内你可见的至多三个自愿生物陷入昏迷，持续至法术结束。如果目标受到伤害，或有人用动作将其摇醒或拍醒，该法术对该目标提前结束。</p><p>如果目标保持昏迷直到法术时间结束，它获得完成一次短休的增益。该目标在完成一次长休前无法再次受此法术影响。</p>',
    scaling: '4环及以上(每高一环多指定一个目标)',
    classes: ['bard', 'sorcerer', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'enemies_abound',
    name: '遍地强敌',
    level: 3,
    school: 'enchantment',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '一个生物',
    attackType: 'save',
    saveAttr: 'int',
    description: '<p>你侵入一个你可见生物的大脑并强迫其进行一次智力豁免。免疫恐慌的生物自动成功。若豁免失败，目标在法术持续期间失去分辨敌友的能力，将所有它可见的生物视为敌人。每当目标受到伤害时，它可以再次进行豁免，成功则法术结束。</p><p>每当受术生物选择另一个生物作为目标时，它必须从其射程内可见的生物中随机选择目标（包括使用攻击、法术或其他能力）。如果有一个敌人引发了受术生物的借机攻击，受术生物必须进行攻击（若能进行）。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 塑能系 (Evocation)
  // ==========================================
  {
    id: 'aura_of_vitality',
    name: '活力灵光',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: false, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '30尺半径灵光',
    attackType: 'none',
    damage: '2d6', // 治疗
    description: '<p>治愈能量从你身上散发，形成 30 尺半径的灵光。直到法术结束，灵光以你为中心随你移动。你可以用附赠动作让灵光内的一个生物（包括你）恢复 2d6 点生命值。</p>',
    scaling: '无',
    classes: ['cleric', 'druid', 'paladin'], // TCE 加入牧师和德鲁伊
    cantripScaling: false
  },
  {
    id: 'blinding_smite',
    name: '致盲斩',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '自身',
    components: { v: true, s: false, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '下一次武器攻击击中的生物',
    attackType: 'save',
    saveAttr: 'con',
    damage: '3d8',
    damageType: 'radiant',
    description: '<p>在法术结束前，你下一次用近战武器攻击命中生物时，武器会爆发出耀眼光芒。该次攻击额外造成 3d8 点光耀伤害，且目标必须进行体质豁免，失败则陷入目盲，持续至法术结束。</p><p>被目盲的生物在每个回合结束时可以再次进行体质豁免，成功则移除目盲状态。</p>',
    scaling: '无',
    classes: ['paladin'],
    cantripScaling: false
  },
  {
    id: 'crusaders_mantle',
    name: '十字军披风',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: false, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '30尺半径灵光',
    attackType: 'none',
    damage: '1d4',
    damageType: 'radiant',
    description: '<p>神圣力量从你身上散发，形成 30 尺半径的灵光，唤起友方生物的勇气。灵光以你为中心随你移动。身处灵光内的每个非敌对生物（包括你）在用武器攻击命中时，额外造成 1d4 点光耀伤害。</p>',
    scaling: '无',
    classes: ['paladin'],
    cantripScaling: false
  },
  {
    id: 'daylight',
    name: '昼明术',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '1 小时',
    target: '60尺半径球状区域',
    attackType: 'none',
    description: '<p>一个 60 尺半径的光球从射程内你选择的一点扩散开来。球内充满明亮光照，并向外延伸额外 60 尺微暗光照。（注：此光照并非阳光，因此对吸血鬼等惧怕阳光的生物无特殊效果。）</p><p>如果你选择的点在一个你持握或未被穿戴携带的物体上，光照将从该物体发出并随其移动。若用不透明物体完全遮盖光源，光照被阻挡。</p><p>若此法术区域覆盖了 3 环或更低环阶法术制造的黑暗区域，制造黑暗的法术被解除。</p>',
    scaling: '无',
    classes: ['cleric', 'druid', 'paladin', 'ranger', 'sorcerer'],
    cantripScaling: false
  },
  {
    id: 'fireball',
    name: '火球术',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '150 尺',
    components: { v: true, s: true, m: '一小团蝙蝠粪便和硫磺' },
    concentration: false,
    duration: '立即',
    target: '20尺半径球状区域',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '8d6',
    damageType: 'fire',
    description: '<p>一道亮光从你指尖射向射程内你选择的一点，随后伴着低沉的吼声爆发成火焰爆炸。该点周围 20 尺半径球状区域内的每个生物必须进行敏捷豁免。失败者受到 8d6 点火焰伤害，成功者减半。</p><p>火焰会绕过转角。区域内未被穿戴或携带的易燃物会被点燃。</p>',
    scaling: '4环及以上(每高一环伤害+1d6)',
    classes: ['sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'leomunds_tiny_hut',
    name: '雷欧蒙小屋',
    level: 3,
    school: 'evocation',
    ritual: true,
    castingTime: '1 分钟',
    range: '10 尺',
    components: { v: true, s: true, m: '一颗水晶小珠' },
    concentration: false,
    duration: '8 小时',
    target: '10尺半径半球',
    attackType: 'none',
    description: '<p>一个 10 尺半径的力场半球出现在你周围和上方，并保持静止。若你离开该区域，法术结束。</p><p>小屋内可容纳包括你在内的九个中型或更小生物。若施法时包含更大型生物或超过九个生物，法术失败。施法时在内的生物和物体可自由进出。其他生物和物体无法进入。法术和其他魔法效应无法穿透小屋，也无法在内部向外施展。内部环境干燥舒适。</p><p>你可以控制内部光照（微暗或黑暗）。小屋从外部看是不透明的（颜色自选），从内部看是透明的。</p>',
    scaling: '无',
    classes: ['bard', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'lightning_bolt',
    name: '闪电束',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '100 尺',
    components: { v: true, s: true, m: '一点毛皮和一根琥珀、水晶或玻璃棒' },
    concentration: false,
    duration: '立即',
    target: '100尺线状区域',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '8d6',
    damageType: 'lightning',
    description: '<p>一道闪电从你身上向你选择的方向射出，形成 100 尺长、5 尺宽的线状区域。区域内的每个生物必须进行敏捷豁免。失败者受到 8d6 点闪电伤害，成功者减半。</p><p>闪电会点燃区域内未被穿戴或携带的易燃物。</p>',
    scaling: '4环及以上(每高一环伤害+1d6)',
    classes: ['sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'mass_healing_word',
    name: '群体治愈真言',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '60 尺',
    components: { v: true, s: false, m: null },
    concentration: false,
    duration: '立即',
    target: '至多6个生物',
    attackType: 'none',
    damage: '1d4', // + 施法调整值
    description: '<p>你呼唤恢复的真言。射程内你可见的至多六个生物恢复生命值，数值等于 1d4 + 你的施法关键属性调整值。该法术对不死生物和构装体无效。</p>',
    scaling: '4环及以上(每高一环治疗量+1d4)',
    classes: ['cleric'],
    cantripScaling: false
  },
  {
    id: 'melfs_minute_meteors',
    name: '马友夫微流星',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '自身',
    components: { v: true, s: true, m: '硝石、硫磺和松焦油搓成的珠子' },
    concentration: true,
    duration: '10 分钟',
    target: '自身',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '2d6',
    damageType: 'fire',
    description: '<p>你在你的空间内创造出 6 颗微型流星。它们在法术持续期间漂浮环绕着你。施法时，以及随后的每回合作为附赠动作，你可以发射一或两颗流星，射向 120 尺内你选择的一点或不同点。流星到达目的地或撞击固体后爆炸。爆炸点周围 5 尺内的每个生物必须进行敏捷豁免。失败者受到 2d6 点火焰伤害，成功者减半。</p>',
    scaling: '4环及以上(每高一环流星数量+2)',
    classes: ['sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'sending',
    name: '短讯术',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '无限',
    components: { v: true, s: true, m: '一段细铜丝' },
    concentration: false,
    duration: '1 轮',
    target: '一个熟悉的生物',
    attackType: 'none',
    description: '<p>你向一个你熟悉的生物发送一段不超过 25 个词的短讯。目标在脑海中听到信息，若它认识你则能认出是你，并能立即回复一段同样长度的信息。智力至少为 1 的生物能理解信息的含义。</p><p>你可以跨越任意距离甚至跨位面发送信息。但若目标位于不同位面，有 5% 几率信息丢失。</p>',
    scaling: '无',
    classes: ['bard', 'cleric', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'wall_of_sand',
    name: '沙墙术',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '90 尺',
    components: { v: true, s: true, m: '一把沙子' },
    concentration: true,
    duration: '10 分钟',
    target: '30尺长墙体',
    attackType: 'none',
    description: '<p>你在射程内可见的地面上创造出一道旋沙之墙。墙体长至多 30 尺、高 10 尺、厚 10 尺。它阻挡视线但不阻挡移动。位于墙体空间内的生物视为目盲，且在其中每移动 1 尺需消耗 3 尺移动力。</p>',
    scaling: '无',
    classes: ['wizard'],
    cantripScaling: false
  },
  {
    id: 'wall_of_water',
    name: '水墙术',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: '一滴水' },
    concentration: true,
    duration: '10 分钟',
    target: '30尺长墙体或环状',
    attackType: 'none',
    description: '<p>你在射程内可见的地面上创造一道水墙。你可以造出长 30 尺、高 10 尺、厚 1 尺的墙，或直径 20 尺、高 20 尺、厚 1 尺的环形墙。墙体空间为困难地形。</p><p>进入墙体空间的远程武器攻击检定具有劣势。穿过墙体的火焰伤害减半。穿过墙体的冷冻伤害会导致经过的墙体部分冻结（每 5 尺见方部分 AC 5，生命值 15）。冻结部分被摧毁后水不会填充缺口。</p>',
    scaling: '无',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'wind_wall',
    name: '风墙术',
    level: 3,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: '一把微型扇子和一根异国羽毛' },
    concentration: true,
    duration: '1 分钟',
    target: '50尺长墙体',
    attackType: 'save',
    saveAttr: 'str',
    damage: '3d8',
    damageType: 'bludgeoning',
    description: '<p>一堵强风之墙从射程内地面升起。墙长至多 50 尺、高 15 尺、厚 1 尺。墙体出现时，区域内每个生物必须进行力量豁免。失败者受到 3d8 点钝击伤害，成功者减半。</p><p>强风阻挡雾、烟和其他气体。小体型或更小的飞行生物或物体无法穿过墙。飞向墙后目标的普通箭矢、弩矢等投射物会被吹偏并自动失手（巨石等大型投射物不受影响）。处于<i>气化形体</i>的生物无法穿过。</p>',
    scaling: '无',
    classes: ['druid', 'ranger'],
    cantripScaling: false
  },

  // ==========================================
  // 幻术系 (Illusion)
  // ==========================================
  {
    id: 'fear',
    name: '恐惧术',
    level: 3,
    school: 'illusion',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: '一根白色羽毛或一颗母鸡心脏' },
    concentration: true,
    duration: '1 分钟',
    target: '30尺锥状区域',
    attackType: 'save',
    saveAttr: 'wis',
    description: '<p>你投射出幻象，显现出生物内心最恐惧的景象。30 尺锥状区域内的每个生物必须进行感知豁免。失败者必须丢下其持有的任何物品，并在法术持续期间陷入恐慌。</p><p>被此法术恐慌的生物必须在它的每个回合使用疾走 (Dash) 动作，并沿最安全的路线尽可能远离你，除非无路可走。若该生物在回合结束时处于无法看见你的位置，它可以进行一次感知豁免。若成功，法术对该生物结束。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'hypnotic_pattern',
    name: '催眠图纹',
    level: 3,
    school: 'illusion',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: false, s: true, m: '一根发光的熏香或装满磷光物质的水晶瓶' },
    concentration: true,
    duration: '1 分钟',
    target: '30尺立方区域',
    attackType: 'save',
    saveAttr: 'wis',
    description: '<p>你在射程内创造出一个 30 尺立方的区域，其中充满了扭曲舞动的色彩图纹。图纹瞬间显现并消失。区域内每个看见图纹的生物必须进行感知豁免。失败者在法术持续期间被魅惑。被魅惑的生物陷入失能状态，且速度降为 0。</p><p>如果受术生物受到伤害，或有人用动作将其摇醒，该法术对该生物结束。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'major_image',
    name: '主要幻影',
    level: 3,
    school: 'illusion',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: '一点羊毛' },
    concentration: true,
    duration: '10 分钟',
    target: '20尺立方区域',
    attackType: 'none',
    description: '<p>你创造出一个物体、生物或其他可见现象的影像，其体积不超过 20 尺立方。影像出现在射程内你可见的一处，并持续至法术结束。它看起来完全真实，包含对应的声音、气味和温度。你无法制造足以造成伤害的冷热，足以造成雷鸣伤害或耳聋的声音，或足以让人恶心的气味。</p><p>只要你在射程内，你可以用动作移动影像到射程内其他位置。你可以改变影像外观使其移动看起来自然（如让幻影生物走路或说话）。</p><p>物理互动会揭穿幻觉，因为物体可以直接穿过影像。生物可用动作进行智力（调查）检定对抗你的法术 DC。若成功识破，生物可以看穿影像，影像的其他感官特质对其也会变得模糊。</p>',
    scaling: '6环及以上(持续时间变为永久，直至被解除，且无需专注)',
    classes: ['bard', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'phantom_steed',
    name: '幻影马',
    level: 3,
    school: 'illusion',
    ritual: true,
    castingTime: '1 分钟',
    range: '30 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '1 小时',
    target: '召唤一只幻影马',
    attackType: 'none',
    description: '<p>一只大型的半真实马状生物出现在射程内你选择的一处未被占据空间。其外表由你决定，但它装备有鞍座、嚼子和缰绳。若装备离开马匹超过 10 尺则消失。</p><p>法术持续期间，你或你选择的一个生物可以骑乘该马。它使用骑乘马的数据，但速度为 100 尺，每小时可行进 10 英里（或急行 13 英里）。法术结束时，马匹会逐渐褪色，给骑手 1 分钟时间下马。若你用动作解散它或它受到伤害，法术结束。</p>',
    scaling: '无',
    classes: ['wizard'], // 暂不含奇械师
    cantripScaling: false
  },

  // ==========================================
  // 死灵系 (Necromancy)
  // ==========================================
  {
    id: 'animate_dead',
    name: '操纵死尸',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 分钟',
    range: '10 尺',
    components: { v: true, s: true, m: '一滴血、一块肉和一撮骨粉' },
    concentration: false,
    duration: '立即',
    target: '一具尸体或一堆骨头',
    attackType: 'none',
    description: '<p>该法术创造一个不死仆役。选择射程内一堆骨头或一具中型或小型的类人生物尸体。你将一种污秽的模拟生命灌注其中，将其唤起为不死生物。若是骨头则变为骷髅，若是尸体则变为僵尸。</p><p>在你的每回合，你可以用附赠动作在精神上命令 60 尺内由该法术创造的任何生物（若有多个，可同时命令）。若不命令，它只会自卫。一旦下令，它会持续执行直到完成。</p><p>该生物受你控制 24 小时。之后它不再听命于你。要在 24 小时届满前维持控制，你需要再次对该生物施法。此时法术不再创造新生物，而是重置你对至多四个已创造生物的控制权。</p>',
    scaling: '4环及以上(每高一环多创造或控制2个不死生物)',
    classes: ['cleric', 'wizard'], // 誓言破坏者圣武士也会
    cantripScaling: false
  },
  {
    id: 'bestow_curse',
    name: '降咒',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '一个生物',
    attackType: 'save',
    saveAttr: 'wis',
    description: '<p>你触碰一个生物，该生物必须进行感知豁免，失败则被诅咒。施法时从以下选项中选择一种诅咒性质：</p><ul><li>选择一项属性。目标进行该属性的属性检定和豁免时具有劣势。</li><li>目标对你的攻击检定具有劣势。</li><li>目标必须在自己回合开始时进行感知豁免，失败则该回合浪费动作，什么也不做。</li><li>你的攻击和法术对目标造成额外 1d8 点黯蚀伤害。</li></ul><p><i>移除诅咒</i>法术可结束此效果。DM 可允许其他诅咒效果。</p>',
    scaling: '4环(专注至多10分钟), 5-6环(无专注8小时), 7-8环(无专注24小时), 9环(无专注永久)',
    classes: ['bard', 'cleric', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'feign_death',
    name: '假死术',
    level: 3,
    school: 'necromancy',
    ritual: true,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '一撮墓土' },
    concentration: false,
    duration: '1 小时',
    target: '一个自愿生物',
    attackType: 'none',
    description: '<p>你触碰一个自愿生物，使其进入一种与死亡无异的僵住状态。在法术持续期间（或直到你用动作解除），目标对外显示为已死。目标陷入目盲和失能，速度降为 0。目标对除心灵以外的所有伤害具有抗性。若目标已中毒或患病，或在期间中毒患病，毒素和疾病在法术结束前无效。</p>',
    scaling: '无',
    classes: ['bard', 'cleric', 'druid', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'life_transference',
    name: '生命传递',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '一个生物',
    attackType: 'none',
    damage: '4d8', // 自伤
    description: '<p>你牺牲部分生命力来治愈另一个生物的伤势。你受到 4d8 点黯蚀伤害，该伤害无法被任何方式减免。随后射程内你选择的一个生物恢复生命值，数值等于你所受伤害的两倍。</p>',
    scaling: '4环及以上(每高一环伤害+1d8)',
    classes: ['cleric', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'revivify',
    name: '回生术',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '价值300gp的钻石，法术会消耗掉' },
    concentration: false,
    duration: '立即',
    target: '一具刚死不久的生物尸体',
    attackType: 'none',
    description: '<p>你触碰一个在最近 1 分钟内死亡的生物。该生物以 1 点生命值复活。该法术无法复活因年老而死的生物，也无法恢复缺失的身体部位。</p>',
    scaling: '无',
    classes: ['cleric', 'paladin', 'ranger', 'druid'], // TCE 增加德鲁伊(野火/星辰等)
    cantripScaling: false
  },
  {
    id: 'speak_with_dead',
    name: '死者交谈',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '10 尺',
    components: { v: true, s: true, m: '燃烧的熏香' },
    concentration: false,
    duration: '10 分钟',
    target: '一具尸体',
    attackType: 'none',
    description: '<p>你赋予射程内一具尸体模拟的生命和智力，使其能回答你的问题。尸体必须有嘴且不能是不死生物。若尸体在过去 10 天内已受此法术影响，则法术失败。</p><p>在法术持续期间，你可以问尸体至多五个问题。尸体只知道它生前知道的事（包括语言）。回答通常简短、隐晦或重复。若你对它有敌意或被视为敌人，它没有义务说真话。此法术并不召回灵魂，因此尸体无法学习新信息或推测未来。</p>',
    scaling: '无',
    classes: ['bard', 'cleric'],
    cantripScaling: false
  },
  {
    id: 'spirit_shroud',
    name: '精魂类衣',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '自身',
    attackType: 'none',
    damage: '1d8',
    // damageType: 'varied', // 施法时选择
    description: '<p>你唤来逝者的精魂在你周围飞舞。直到法术结束，你对你周围 10 尺内生物发动的任何攻击命中时，额外造成 1d8 点伤害。伤害类型为光耀、黯蚀或冷冻（施法时选择）。受到此伤害的生物直到你的下个回合开始前无法恢复生命值。</p><p>此外，你可见的任何生物若在你周围 10 尺内开始其回合，其速度减少 10 尺，直到你的下个回合开始。</p>',
    scaling: '4环及以上(每高两环伤害+1d8)',
    classes: ['cleric', 'paladin', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'summon_undead',
    name: '召唤不死生物',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '90 尺',
    components: { v: true, s: true, m: '一个镀金头骨，价值至少300gp' },
    concentration: true,
    duration: '1 小时',
    target: '召唤一个不死精魂',
    attackType: 'none',
    description: '<p>你唤来一个不死精魂。它显现在射程内你可见的一处未被占据空间。该实体形态使用“不死精魂”的数据板。施法时，你选择形态：幽魂 (Ghostly)、腐烂 (Putrid) 或骸骨 (Skeletal)。该形态决定了数据板中的一项特质。</p><p>该生物对你和同伴友善。在战斗中，它和你共享先攻，但紧随你的回合后行动。它听从你的口头命令（无须动作）。</p>',
    scaling: '4环及以上(提升精魂数据板中的等级)',
    classes: ['warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'vampiric_touch',
    name: '吸血鬼之触',
    level: 3,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '一个生物',
    attackType: 'melee',
    damage: '3d6',
    damageType: 'necrotic',
    description: '<p>你阴影笼罩的手通过触碰吸取他人的生命力。在你的触及范围内对一个生物进行近战法术攻击。若命中，目标受到 3d6 点黯蚀伤害，你恢复等于伤害值一半的生命值。在法术结束前，你可以在每个回合用动作再次发动此攻击。</p>',
    scaling: '4环及以上(每高一环伤害+1d6)',
    classes: ['warlock', 'wizard'], // 墓穴牧师/德鲁伊(孢子)
    cantripScaling: false
  },

  // ==========================================
  // 变化系 (Transmutation)
  // ==========================================
  {
    id: 'ashardalons_stride',
    name: '阿沙德隆步伐',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '自身',
    attackType: 'none',
    damage: '1d6',
    damageType: 'fire',
    description: '<p>巨龙般的滚滚烈焰从你脚下喷出，赋予你爆发性的速度。在法术持续期间，你的速度增加 20 尺，且移动不会引发借机攻击。</p><p>当你移动进入一个生物或未被穿戴携带物体的 5 尺范围内时，它因你的热浪轨迹受到 1d6 点火焰伤害。一个生物或物体每回合只能受到一次该伤害。</p>',
    scaling: '4环及以上(每高一环速度+5尺，伤害+1d6)',
    classes: ['ranger', 'sorcerer', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'blink',
    name: '闪现术',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '1 分钟',
    target: '自身',
    attackType: 'none',
    description: '<p>在法术持续期间，你在你的每个回合结束时投掷一枚 d20。若结果为 11 或更高，你从当前位面消失并进入以太位面（若你已在该位面则法术失败）。在你下个回合开始时，以及法术结束时（若你还在以太位面），你会返回之前消失位置 10 尺内你选择的一处未被占据空间。若无可用空间，则出现在最近的未被占据空间（若距离相等则随机）。你可以用动作解除法术。</p><p>在以太位面时，你可以看见并听见原位面，但呈灰色且只能看到 60 尺。你只能影响以太位面的生物或受其影响。原位面的生物无法感知或与你互动，除非它们有特殊能力。</p>',
    scaling: '无',
    classes: ['sorcerer', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'elemental_weapon',
    name: '元素武器',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 小时',
    target: '一把非魔法武器',
    attackType: 'none',
    damage: '1d4',
    // damageType: 'varied', // 施法时选择
    description: '<p>你触碰一把非魔法武器使其成为魔法武器。选择酸蚀、冷冻、火焰、闪电或雷鸣之一。在法术持续期间，该武器攻击检定获得 +1 加值，且命中时造成额外 1d4 点选定类型的伤害。</p>',
    scaling: '5-6环(+2攻击/+2d4伤害), 7环及以上(+3攻击/+3d4伤害)',
    classes: ['druid', 'paladin'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'erupting_earth',
    name: '土石喷发',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: '一块黑曜石' },
    concentration: false,
    duration: '立即',
    target: '20尺立方区域',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '3d12',
    damageType: 'bludgeoning',
    description: '<p>射程内地面上的一点爆发出翻腾的泥土与石块，覆盖 20 尺立方区域。区域内的每个生物必须进行敏捷豁免。失败者受到 3d12 点钝击伤害，成功者减半。此外，该区域地面变为困难地形，直到被清理。每 5 尺见方区域需至少 1 分钟手工清理。</p>',
    scaling: '4环及以上(每高一环伤害+1d12)',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'flame_arrows',
    name: '火焰箭',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 小时',
    target: '一壶弹药',
    attackType: 'none',
    damage: '1d6',
    damageType: 'fire',
    description: '<p>你触碰一壶箭或弩矢。当使用从该箭壶取出的弹药进行远程武器攻击命中目标时，目标受到额外 1d6 点火焰伤害。当弹药击中或失手后，其上的魔法消失。当取出十二支弹药后，法术结束。</p>',
    scaling: '4环及以上(每高一环弹药数量+2)',
    classes: ['druid', 'ranger', 'sorcerer', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'fly',
    name: '飞行术',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '一根鸟的翅膀羽毛' },
    concentration: true,
    duration: '10 分钟',
    target: '一个自愿生物',
    attackType: 'none',
    description: '<p>你触碰一个自愿生物。在法术持续期间，目标获得 60 尺飞行速度。法术结束时，若目标仍在空中且无法阻止坠落，它会掉下来。</p>',
    scaling: '4环及以上(每高一环多指定一个目标)',
    classes: ['sorcerer', 'warlock', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'gaseous_form',
    name: '气化形体',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '一点薄纱和一缕烟' },
    concentration: true,
    duration: '1 小时',
    target: '一个自愿生物',
    attackType: 'none',
    description: '<p>你将一个自愿生物及其穿戴携带物变成一团雾气。若生物降至 0 生命值法术结束。虚体生物不受影响。</p><p>该形态下，目标唯一的移动方式是 10 尺飞行速度。它可以进入并占据其他生物的空间。它对非魔法伤害具有抗性，力量、敏捷和体质豁免具有优势。它可以穿过细小裂缝，但视液体为固体表面。它不会坠落，被震慑或失能时仍悬浮。</p><p>雾气形态无法说话或操作物体。携带物无法被丢弃、使用或互动。无法攻击或施法。</p>',
    scaling: '无',
    classes: ['sorcerer', 'warlock', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'haste',
    name: '加速术',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: '一片甘草根' },
    concentration: true,
    duration: '1 分钟',
    target: '一个自愿生物',
    attackType: 'none',
    description: '<p>选择射程内一个你可见的自愿生物。直到法术结束，其速度加倍，AC +2，敏捷豁免具有优势，且每回合获得一个额外动作。该动作只能用于：攻击（仅限一次武器攻击）、疾走、撤离、躲藏或使用物体。</p><p>法术结束时，目标因极度疲劳而陷入虚弱，直到其下个回合结束前无法移动或执行动作。</p>',
    scaling: '无',
    classes: ['sorcerer', 'wizard'], // 暂不含奇械师/复仇圣武士
    cantripScaling: false
  },
  {
    id: 'lightning_arrow',
    name: '闪电箭',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 分钟',
    target: '下一次远程武器攻击',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '4d8',
    damageType: 'lightning',
    description: '<p>在法术持续期间，你下一次进行远程武器攻击时，武器弹药或投掷武器本身变为一道闪电。正常进行攻击检定。若命中，目标受到 4d8 点闪电伤害；若失手，伤害减半。这取代武器的正常伤害。</p><p>无论命中与否，目标周围 10 尺内的每个生物必须进行敏捷豁免。失败者受到 2d8 点闪电伤害，成功者减半。攻击后弹药或武器恢复原状。</p>',
    scaling: '4环及以上(主伤害和范围伤害各+1d8)',
    classes: ['ranger'],
    cantripScaling: false
  },
  {
    id: 'meld_into_stone',
    name: '融身入石',
    level: 3,
    school: 'transmutation',
    ritual: true,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '8 小时',
    target: '自身',
    attackType: 'none',
    description: '<p>你步入一块足以容纳你身躯的岩石或石面，与石头及你的装备融合。你在石头外不可见也无法被非魔法感官侦测。</p><p>在石头内时，你无法看见外部，对外部声音的感知（察觉）检定具有劣势。你无法移动，但可对自己施法。你可以消耗移动力离开石头（法术结束）。</p><p>石头的轻微损伤不影响你，但若部分破坏导致你无法容身，你被排出并受 6d6 钝击伤害。若石头被完全破坏或转化，你被排出并受 50 点钝击伤害。被排出时你会倒地出现在最近空间。</p>',
    scaling: '无',
    classes: ['cleric', 'druid'],
    cantripScaling: false
  },
  {
    id: 'plant_growth',
    name: '植物滋长',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作', // 或8小时
    range: '150 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '见描述',
    attackType: 'none',
    description: '<p>该法术将活力注入植物。有两种用法：</p><p><b>1. 阻碍移动 (1动作)</b>：选择射程内一点。该点周围 100 尺半径内的普通植物变得茂密杂乱。生物在区域内移动 1 尺需消耗 4 尺移动力。你可以指定区域内任意部分不受影响。</p><p><b>2. 丰收 (8小时)</b>：你在射程内一点周围半英里半径内滋养土地。持续 1 年，在此期间植物产量加倍。</p>',
    scaling: '无',
    classes: ['bard', 'druid', 'ranger'],
    cantripScaling: false
  },
  {
    id: 'slow',
    name: '缓慢术',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '120 尺',
    components: { v: true, s: true, m: '一滴糖浆' },
    concentration: true,
    duration: '1 分钟',
    target: '至多6个生物',
    attackType: 'save',
    saveAttr: 'wis',
    description: '<p>你改变射程内 40 尺立方区域内至多六个生物周围的时间流速。每个目标必须通过感知豁免，否则受法术影响。</p><p>受影响目标速度减半，AC 和敏捷豁免受 -2 减值，且无法使用反应。在它的回合，它只能选择执行一个动作或一个附赠动作，不能都做。无论有何能力，它一回合只能进行一次近战或远程攻击。</p><p>若它尝试施展咏唱时间为 1 动作的法术，需投 d20。若结果 11 或更高，法术直到其下个回合才能生效，且它必须在该回合用动作完成施法，否则法术浪费。</p><p>受术者在每回合结束时可再做感知豁免，成功则移除效果。</p>',
    scaling: '无',
    classes: ['sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'speak_with_plants',
    name: '植物交谈',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '10 分钟',
    target: '30尺内植物',
    attackType: 'none',
    description: '<p>你赋予周围 30 尺内的植物有限的感知和活化能力，使其能与其交流或听从简单命令。你可以询问过去一天内发生的事。你也可以将植物造成的困难地形变为普通地形，或将普通有植物地形变为困难地形。</p><p>植物无法拔根移动，但可挥动枝叶。若区域内有植物生物，你可以与其通过共同语言交流，但无权命令它。此法术可解除<i>纠缠术</i>的束缚。</p>',
    scaling: '无',
    classes: ['bard', 'druid', 'ranger'],
    cantripScaling: false
  },
  {
    id: 'tiny_servant',
    name: '微型仆役',
    level: 3,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 分钟',
    range: '触及',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '8 小时',
    target: '一个微型非魔法物体',
    attackType: 'none',
    description: '<p>你触碰一个微型非魔法物体（未被附着或携带）。它生出小手小脚变为受你控制的生物（数据见“微型仆役”）。</p><p>你可以用附赠动作在精神上命令 120 尺内的仆役。若不命令，它只会自卫。命令会持续执行直到完成。当生命值降为 0 时恢复原状。</p>',
    scaling: '4环及以上(每高一环多活化2个物体)',
    classes: ['wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'water_breathing',
    name: '水下呼吸',
    level: 3,
    school: 'transmutation',
    ritual: true,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: '一根短芦苇或稻草' },
    concentration: false,
    duration: '24 小时',
    target: '至多10个自愿生物',
    attackType: 'none',
    description: '<p>该法术赋予射程内你可见的至多十个自愿生物在水下呼吸的能力，直到法术结束。受术生物仍保留原本的呼吸模式。</p>',
    scaling: '无',
    classes: ['druid', 'ranger', 'sorcerer', 'wizard'], // 暂不含奇械师
    cantripScaling: false
  },
  {
    id: 'water_walk',
    name: '水上行走',
    level: 3,
    school: 'transmutation',
    ritual: true,
    castingTime: '1 动作',
    range: '30 尺',
    components: { v: true, s: true, m: '一块软木' },
    concentration: false,
    duration: '1 小时',
    target: '至多10个自愿生物',
    attackType: 'none',
    description: '<p>该法术赋予射程内至多十个你可见的自愿生物在任何液体表面（水、酸液、泥浆、雪、流沙或岩浆）行走的能力，如同走在无害固体地面上（走岩浆仍受热伤害）。</p><p>若施法时目标淹没在液体中，它会以每轮 60 尺速度浮到表面。</p>',
    scaling: '无',
    classes: ['cleric', 'druid', 'ranger', 'sorcerer'], // 暂不含奇械师
    cantripScaling: false
  }
];