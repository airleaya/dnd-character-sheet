// src/data/spells/level7.ts
import type { SpellDefinition } from '../../types/Spell';

export const LEVEL_7_SPELLS: SpellDefinition[] = [
  // ==========================================
  // 防护系 (Abjuration)
  // ==========================================
  {
    id: 'symbol',
    name: '徽记术',
    level: 7,
    school: 'abjuration',
    ritual: false,
    castingTime: '1 分钟',
    range: '触及',
    components: { v: true, s: true, m: '水银、磷、以及价值至少 1,000 gp 的钻石粉末和蛋白石粉末，法术会消耗掉' },
    concentration: false,
    duration: '永久',
    target: '表面或物体',
    attackType: 'save',
    // saveAttr: 已移除，因效果多变不固定
    damage: '10d10', // 死亡徽记
    damageType: 'necrotic', // 死亡徽记
    description: '<p>施展此法术时，你在一个表面（如地板、墙壁或桌子的一部分）或一个可以关闭以隐藏徽记的物体（如书、卷轴或宝箱）上刻下一个有害的符号。如果选择表面，徽记覆盖的范围直径不能超过 10 尺。如果选择物体，该物体必须保持在原位；如果物体被移出施法点超过 10 尺，徽记破损，法术结束且不会触发。</p><p>徽记几乎是隐形的，需要通过智力（调查）检定对抗你的法术 DC 才能发现。</p><p>施法时你决定触发条件。对于表面上的徽记，典型触发条件包括：触碰或踩踏、移开覆盖物、靠近一定距离。对于物体内的徽记，包括：打开物体、靠近一定距离、看到或阅读徽记。</p><p>你可以进一步细化触发条件（如基于生物的物理特征、种类、身高体重等），也可以设定免触发条件（如说出口令）。</p><p>刻写徽记时，从以下选项中选择一种效果。一旦触发，徽记发光，在 10 分钟内以微暗光照充满 60 尺半径球状区域（之后法术结束）。任何在徽记激活时处于区域内的生物，以及在回合内首次进入或在其中结束回合的生物，都会成为目标。</p><ul><li><b>死亡 (Death)</b>：每个目标必须进行体质豁免，失败受 10d10 黯蚀伤害，成功减半。</li><li><b>争执 (Discord)</b>：每个目标必须进行体质豁免。失败者在 1 分钟内与其他生物争吵辩驳。期间无法进行有意义的交流，且攻击检定和属性检定具有劣势。</li><li><b>恐惧 (Fear)</b>：每个目标必须进行感知豁免，失败则陷入恐慌状态，持续 1 分钟。恐慌期间，目标丢掉手中的物品，并在每回合尽力移动到离徽记至少 30 尺外。</li><li><b>绝望 (Hopelessness)</b>：每个目标必须进行魅力豁免。失败者在 1 分钟内被绝望压倒。期间无法攻击或以任何有害能力、法术或魔法效应瞄准任何生物。</li><li><b>疯狂 (Insanity)</b>：每个目标必须进行智力豁免。失败者陷入疯狂，持续 1 分钟。疯狂生物无法采取动作，无法理解他人语言，无法阅读，只会胡言乱语。DM 控制其移动，且移动方式不稳定。</li><li><b>痛苦 (Pain)</b>：每个目标必须进行体质豁免，失败者因剧痛陷入失能状态，持续 1 分钟。</li><li><b>睡眠 (Sleep)</b>：每个目标必须进行感知豁免，失败者陷入昏迷状态，持续 10 分钟。若受到伤害或有人用动作将其摇醒，则苏醒。</li><li><b>震慑 (Stunning)</b>：每个目标必须进行感知豁免，失败者陷入震慑状态，持续 1 分钟。</li></ul>',
    scaling: '无',
    classes: ['bard', 'cleric', 'druid', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 咒法系 (Conjuration)
  // ==========================================
  {
    id: 'conjure_celestial',
    name: '召唤天界生物',
    level: 7,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 分钟',
    range: '90 尺',
    components: { v: true, s: true, m: null },
    concentration: true,
    duration: '1 小时',
    target: '召唤一个天界生物',
    attackType: 'none',
    description: '<p>你召唤一个挑战等级 4 或更低的天界生物，它出现在射程内你可见的一处未被占据空间。当该天界生物生命值降为 0 或法术结束时，它消失。</p><p>该天界生物在法术持续期间对你和你的同伴友善。为该生物掷先攻，它拥有自己的回合。它听从你的口头命令（无须动作），只要命令不违背其阵营。如果你不发令，它只会保护自己免受敌对生物伤害，此外不采取任何动作。</p><p>DM 处有羽蛇 (Couatl) 等天界生物的统计数据。</p>',
    scaling: '当你使用 9 环法术位施展此法术时，你可以召唤挑战等级 5 或更低的天界生物。',
    classes: ['cleric'],
    cantripScaling: false
  },
  {
    id: 'dream_of_the_blue_veil',
    name: '蓝纱之梦',
    level: 7,
    school: 'conjuration',
    ritual: false,
    castingTime: '10 分钟',
    range: '20 尺',
    components: { v: true, s: true, m: '来自目标世界的魔法物品或自愿生物' },
    concentration: false,
    duration: '6 小时',
    target: '至多8个自愿生物',
    attackType: 'none',
    description: '<p>你和射程内至多八个自愿生物在法术持续期间陷入昏迷，并体验关于物质位面上另一个世界的幻象（如灰鹰、托瑞尔、克莱恩或艾伯伦）。如果法术持续至时限结束，幻象以你们每个人遇到并拉开一道神秘的蓝色帷幕而告终。法术随后结束，你们的精神和肉体被传送至幻象中的世界。</p><p>施展此法术需满足以下条件：你必须拥有一件源自你想去往世界的魔法物品，且你必须知道该世界的存在（即便不知道名字）。你在另一个世界的目的地是该魔法物品被创造地点的 1 英里范围内的安全位置。或者，若受术生物中有人出生于该世界，你也可以施法，目的地则为该生物出生地 1 英里内的安全位置。</p><p>如果任何受术生物受到伤害，该生物身上的法术提前结束且不会被传送。如果你受到伤害，法术对你和所有其他生物都结束，无人被传送。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'mordenkainens_magnificent_mansion',
    name: '摩登肯豪宅术',
    level: 7,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 分钟',
    range: '300 尺',
    components: { v: true, s: true, m: '一个象牙雕刻的微型传送门、一块抛光大理石和一把微型银勺，每件价值至少 5 gp' },
    concentration: false,
    duration: '24 小时',
    target: '创造一个异次元豪宅',
    attackType: 'none',
    description: '<p>你在射程内创造出一处持续至法术结束的异次元居所。你选择其入口位置。入口微光闪烁，宽 5 尺高 10 尺。只要入口保持开启，你和你在施法时指定的任何生物都可以进入该异次元居所。你可以在距离入口 30 尺内开启或关闭它。关闭时入口隐形。</p><p>入口后是一个宏伟的门厅，通向众多房间。内部空气洁净、清新且温暖。</p><p>你可以随意设计平面图，但空间不能超过 50 个立方体，每个立方体边长 10 尺。居所内按你的选择进行陈设和装饰。它包含足以供 100 人享用的九道菜盛宴的食物。一队由 100 名近乎透明的仆人侍奉所有进入者。你决定仆人的外貌和着装。它们完全服从你的命令。每个仆人能执行普通人类仆役能做的任何任务，但无法攻击或采取任何直接伤害其他生物的行动。因此仆人可以取物、清洁、缝补、折叠衣物、生火、端菜、倒酒等。仆人可以在豪宅内任意移动但不能离开。此法术创造的家具和其他物体若被移出豪宅会化为烟雾消散。法术结束时，任何留在异次元空间内的生物或物体会被排出到离入口最近的开放空间。</p>',
    scaling: '无',
    classes: ['bard', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'plane_shift',
    name: '位面转移',
    level: 7,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '一根价值至少 250 gp 的分叉金属杆，需与特定位面同调' },
    concentration: false,
    duration: '立即',
    target: '至多8个自愿生物，或1个不愿意的生物',
    attackType: 'melee',
    description: '<p>你和至多八个手牵手围成一圈的自愿生物被传送到另一个存在位面。你可以概括地指定目标目的地，例如火元素位面的黄铜之城，或九层地狱第二层的迪斯帕特宫殿，你们会出现在该目的地附近。具体到达位置由 DM 决定（例如你可能到达黄铜之城的钢铁街道，或阿什门前，或隔着火海眺望城市）。</p><p>或者，如果你知道另一个位面上某个传送法阵的符文序列，此法术可以将你们传送到该法阵。如果传送法阵太小容纳不下所有生物，它们出现在法阵旁最近的未被占据空间。</p><p>你可以使用此法术将一个不愿意的生物放逐到另一个位面。对你触及范围内的一个生物进行近战法术攻击。若命中，该生物必须进行魅力豁免。若失败，它被传送到你指定的位面上的随机位置。被传送的生物必须自己寻找回到当前位面的方法。</p>',
    scaling: '无',
    classes: ['cleric', 'druid', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'teleport',
    name: '传送术',
    level: 7,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 动作',
    range: '10 尺',
    components: { v: true, s: false, m: null },
    concentration: false,
    duration: '立即',
    target: '至多8个生物或1个物体',
    attackType: 'none',
    description: '<p>该法术瞬间将你和射程内你可见的至多八个自愿生物，或者射程内你可见的一个物体，传送到你选择的目的地。如果你以物体为目标，它必须能完全放入一个 10 尺立方体内，且不能被不愿意的生物持有或携带。</p><p>你选择的目的地必须是你已知的，且必须与你处于同一位面。你对目的地的熟悉程度决定了传送是否成功。DM 投掷 d100 并查阅表格。</p><table class="table table-bordered"><thead><tr><th>熟悉程度</th><th>事故</th><th>类似区域</th><th>去偏</th><th>准确</th></tr></thead><tbody><tr><td>永久法阵</td><td>—</td><td>—</td><td>—</td><td>01-100</td></tr><tr><td>关联物品</td><td>—</td><td>—</td><td>—</td><td>01-100</td></tr><tr><td>非常熟悉</td><td>01-05</td><td>06-13</td><td>14-24</td><td>25-100</td></tr><tr><td>见过且随意</td><td>01-33</td><td>34-43</td><td>44-53</td><td>54-100</td></tr><tr><td>见过一次</td><td>01-43</td><td>44-53</td><td>54-73</td><td>74-100</td></tr><tr><td>描述</td><td>01-43</td><td>44-53</td><td>54-73</td><td>74-100</td></tr><tr><td>错误目的地</td><td>01-50</td><td>51-100</td><td>—</td><td>—</td></tr></tbody></table><p><b>熟悉程度 (Familiarity)</b>：“永久法阵”指你知道其符文序列的永久传送法阵。“关联物品”指你拥有过去六个月内从目的地取来的物品（如从巫妖墓穴取来的大理石）。“非常熟悉”指你去过很多次的地方。“见过且随意”指你去过超过一次但不熟悉的地方。“见过一次”指你只见过一次（可能通过魔法）。“描述”指通过他人描述或地图了解的地方。“错误目的地”指不存在的地方。</p><p><b>准确 (On Target)</b>：你们准确到达目的地。</p><p><b>去偏 (Off Target)</b>：你们出现在离目的地随机距离和方向的地方。偏离距离为 1d10 × 1d10 的百分比（例如 15% 即 18 英里）。方向由 d8 决定。</p><p><b>类似区域 (Similar Area)</b>：你们出现在一个视觉或主题上相似的不同区域。</p><p><b>事故 (Mishap)</b>：魔法不可预测导致旅途艰难。每个传送生物（或物体）受到 3d10 力场伤害，然后 DM 重新投骰决定去向（可能再次发生事故）。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'temple_of_the_gods',
    name: '诸神殿堂',
    level: 7,
    school: 'conjuration',
    ritual: false,
    castingTime: '1 小时',
    range: '120 尺',
    components: { v: true, s: true, m: '一个价值至少 5 gp 的圣徽' },
    concentration: false,
    duration: '24 小时',
    target: '创造一座神庙',
    attackType: 'save',
    saveAttr: 'cha',
    description: '<p>你使一座神庙在射程内可见的地面上闪烁现形。神庙必须能放入一个边长至多 120 尺的未被占据立方空间内。神庙持续至法术结束。它供奉你施法时所用圣徽代表的神祇、神系或哲学。</p><p>你决定神庙的外观。只有你和你在施法时指定的生物可以开启或关闭门窗。</p><p>神庙内部充满燃烧的熏香气味，温度适宜。你可以选择是否照明。</p><p>神庙排斥你在施法时选定的生物类型：天界、元素、精类、邪魔或不死生物。若选定类型的生物试图进入，必须进行魅力豁免。失败者 24 小时内无法进入。即使能进入，它们在神庙内的攻击检定、属性检定和豁免检定也需减去一个 d4。</p><p>此外，预言系法术的传感器无法出现在神庙内，内部生物也无法被预言法术锁定。</p><p>最后，任何生物在神庙内通过 1 环或更高环阶法术恢复生命值时，额外恢复等于你感知调整值的生命值（至少 1 点）。</p><p>神庙由不透明的魔法力场构成，延伸至以太位面，阻挡以太旅行。<i>解除魔法</i>对神庙无效，<i>反魔法场</i>也无效。<i>解离术</i>可瞬间摧毁神庙。</p><p>若在同一地点每天施展此法术持续一年，效果变为永久。</p>',
    scaling: '无',
    classes: ['cleric'],
    cantripScaling: false
  },

  // ==========================================
  // 惑控系 (Enchantment)
  // ==========================================
  {
    id: 'power_word_pain',
    name: '律令痛苦',
    level: 7,
    school: 'enchantment',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: false, m: null },
    concentration: false,
    duration: '立即',
    target: '一个生物',
    attackType: 'save',
    saveAttr: 'con', // 用于后续回合结束效果
    description: '<p>你说出一个充满力量的词，引发剧烈的痛苦波涛冲击射程内你可见的一个生物。如果目标现有生命值为 100 点或更少，它将承受致残般的痛苦。否则，法术对它无效。如果目标免疫魅惑状态，它也不受影响。</p><p>当目标受致残痛苦影响时，产生以下效果：</p><ul><li>它的任何速度都不能超过 10 尺。</li><li>目标的攻击检定、属性检定和豁免检定具有劣势（体质豁免除外）。</li><li>如果目标试图施展法术，它必须先进行一次体质豁免。若失败，施法失败且法术被浪费。</li></ul><p>承受这种痛苦的目标可以在其每个回合结束时进行一次体质豁免。若豁免成功，痛苦结束。</p>',
    scaling: '无',
    classes: ['sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 塑能系 (Evocation)
  // ==========================================
  {
    id: 'crown_of_stars',
    name: '星散之冠',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '1 小时',
    target: '自身',
    attackType: 'ranged',
    damage: '4d12',
    damageType: 'radiant',
    description: '<p>七颗星光般的微粒出现并环绕你的头部，持续至法术结束。你可以用附赠动作让其中一颗微粒飞射向 120 尺内的一个生物或物体。当你这样做时，进行一次远程法术攻击。若命中，目标受到 4d12 点光耀伤害。无论命中与否，微粒都会消耗掉。如果你耗尽最后一颗微粒，法术提前结束。</p><p>如果你剩余四颗或更多微粒，它们发出 30 尺半径的明亮光照和额外 30 尺的微暗光照。如果你剩余一到三颗微粒，它们发出 30 尺半径的微暗光照。</p>',
    scaling: '当你使用 8 环或更高环阶的法术位施展此法术时，每比 7 环高一环，微粒数量增加两颗。',
    classes: ['sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'delayed_blast_fireball',
    name: '延迟爆裂火球',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '150 尺',
    components: { v: true, s: true, m: '一个小球，由蝙蝠粪便和硫磺制成' },
    concentration: true,
    duration: '1 分钟',
    target: '20尺半径球体',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '12d6', // +1d6 per turn
    damageType: 'fire',
    description: '<p>一道黄光从你指尖射出，在射程内你选择的一点凝聚成一颗发光的珠子，并持续存在。当法术结束时（无论是因为你专注中断还是你决定结束它），珠子会伴随着低沉的轰鸣声爆发成绕过转角的火焰。以该点为中心 20 尺半径球状区域内的每个生物必须进行敏捷豁免。失败者受到等于累积总伤害的火焰伤害，成功者减半。</p><p>法术的基础伤害为 12d6。如果你的回合结束时珠子尚未引爆，伤害增加 1d6。</p><p>如果在时限结束前珠子被触碰，触碰它的生物必须进行敏捷豁免。失败则法术立即结束，珠子爆发火焰。成功则该生物可以将珠子投掷至多 40 尺远。当珠子撞击生物或固体物体时，法术结束，珠子爆炸。</p><p>火焰会伤害区域内的物体，并点燃未被穿戴或携带的易燃物。</p>',
    scaling: '当你使用 8 环或更高环阶的法术位施展此法术时，每比 7 环高一环，基础伤害增加 1d6。',
    classes: ['sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'divine_word',
    name: '圣言',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '30 尺',
    components: { v: true, s: false, m: null },
    concentration: false,
    duration: '立即',
    target: '射程内任意数量生物',
    attackType: 'save',
    saveAttr: 'cha',
    description: '<p>你说出一个神圣的词语，其中蕴含着创世之初塑造世界的力量。选择射程内任意数量你可见的生物。每个能听到你的生物必须进行魅力豁免。失败者根据其当前生命值承受以下效果：</p><ul><li>50 点或更少：耳聋，持续 1 分钟。</li><li>40 点或更少：耳聋且目盲，持续 10 分钟。</li><li>30 点或更少：目盲、耳聋且震慑，持续 1 小时。</li><li>20 点或更少：立即死亡。</li></ul><p>无论其当前生命值如何，若天界生物、元素生物、精类或邪魔豁免失败，它会被迫返回其原属位面（若不在此位面），且 24 小时内无法以除<i>祈愿术</i>以外的任何方式返回当前位面。</p>',
    scaling: '无',
    classes: ['cleric'],
    cantripScaling: false
  },
  {
    id: 'fire_storm',
    name: '火焰风暴',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '150 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '至多10个10尺立方区域',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '7d10',
    damageType: 'fire',
    description: '<p>由咆哮烈焰组成的风暴出现在射程内你选择的位置。风暴区域由至多十个 10 尺立方体组成，你可以随意排列它们。每个立方体必须至少有一个面与另一个立方体相邻。区域内的每个生物必须进行敏捷豁免。失败者受到 7d10 点火焰伤害，成功者减半。</p><p>火焰伤害区域内的物体，并点燃未被穿戴或携带的易燃物。如果你愿意，区域内的植物生命不受此法术影响。</p>',
    scaling: '无',
    classes: ['cleric', 'druid', 'sorcerer'],
    cantripScaling: false
  },
  {
    id: 'forcecage',
    name: '力场监牢',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '100 尺',
    components: { v: true, s: true, m: '价值 1,500 gp 的红宝石粉末' },
    concentration: false,
    duration: '1 小时',
    target: '一个生物',
    attackType: 'save', // 针对传送
    description: '<p>一个静止、隐形、由魔法力场构成的立方体监牢出现在射程内你选择的区域。监牢可以是笼状或实心盒状，由你选择。</p><p>笼状监牢边长至多 20 尺，由直径 1/2 英寸的栏杆组成，间距 1/2 英寸。</p><p>盒状监牢边长至多 10 尺，形成实心屏障，阻止任何物质穿过，并阻挡任何施展进出该区域的法术。</p><p>施法时，任何完全处于监牢区域内的生物被困住。仅部分在区域内或体型过大无法容纳的生物会被推离中心，直到完全位于区域外。</p><p>笼内生物无法通过非魔法手段离开。如果生物试图使用传送或跨位面旅行离开，必须先进行魅力豁免。成功则可以使用该魔法离开。失败则无法离开且浪费该法术或效果。监牢延伸至以太位面，阻挡以太旅行。</p><p>此法术无法被<i>解除魔法</i>解除。</p>',
    scaling: '无',
    classes: ['bard', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'mordenkainens_sword',
    name: '摩登肯之剑',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: '一把微型白金剑，柄和首为铜锌合金，价值 250 gp' },
    concentration: true,
    duration: '1 分钟',
    target: '一个生物',
    attackType: 'melee',
    damage: '3d10',
    damageType: 'force',
    description: '<p>你创造出一把剑形的力场平面，悬浮在射程内，持续至法术结束。</p><p>当剑出现时，你对剑 5 尺内的一个目标进行一次近战法术攻击。若命中，目标受到 3d10 点力场伤害。直到法术结束，你可以在你的每回合用附赠动作将剑移动至多 20 尺到你可见的一处，并对相同目标或不同目标重复此攻击。</p>',
    scaling: '无',
    classes: ['bard', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'prismatic_spray',
    name: '虹光喷射',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '60尺锥状区域',
    attackType: 'save',
    saveAttr: 'dex',
    description: '<p>八道多彩光束从你手中射出。每道光束颜色不同，具有不同的力量。60 尺锥状区域内的每个生物必须进行敏捷豁免。对每个目标投掷 d8 决定其受哪种颜色光束影响：</p><ul><li><b>1-红 (Red)</b>：失败受 10d6 火焰伤害，成功减半。</li><li><b>2-橙 (Orange)</b>：失败受 10d6 酸蚀伤害，成功减半。</li><li><b>3-黄 (Yellow)</b>：失败受 10d6 闪电伤害，成功减半。</li><li><b>4-绿 (Green)</b>：失败受 10d6 毒素伤害，成功减半。</li><li><b>5-蓝 (Blue)</b>：失败受 10d6 冷冻伤害，成功减半。</li><li><b>6-靛 (Indigo)</b>：失败则陷入束缚状态。它必须在每个回合结束时进行体质豁免。成功三次法术结束。失败三次则永久变成石头（石化）。成功和失败不必连续。</li><li><b>7-紫 (Violet)</b>：失败则陷入目盲状态。它必须在你下回合开始时进行感知豁免。成功则目盲结束。失败则被传送到 DM 选择的另一个位面，并不再目盲。（通常非原位面生物被放逐回乡，其他生物被扔进星界或以太位面）。</li><li><b>8-特殊 (Special)</b>：目标被两道光束击中。重投两次，若再出 8 则重投。</li></ul>',
    scaling: '无',
    classes: ['sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'whirlwind',
    name: '旋风术',
    level: 7,
    school: 'evocation',
    ritual: false,
    castingTime: '1 动作',
    range: '300 尺',
    components: { v: true, s: false, m: '一根稻草' },
    concentration: true,
    duration: '1 分钟',
    target: '旋风',
    attackType: 'save',
    saveAttr: 'dex',
    damage: '10d6',
    damageType: 'bludgeoning',
    description: '<p>一股旋风呼啸出现在射程内你可见的地面一点。旋风是以该点为中心，半径 10 尺、高 30 尺的圆柱体。直到法术结束，你可以用动作将旋风沿地面向任意方向移动至多 30 尺。旋风会吸入任何未被固定且未被穿戴携带的中型或更小物体。</p><p>当生物在回合内首次进入旋风或旋风进入其空间（包括出现时），必须进行敏捷豁免。失败者受到 10d6 点钝击伤害，成功者减半。此外，大型或更小生物若豁免失败，还需进行力量豁免，否则被旋风束缚直至法术结束。当生物在被束缚状态下开始回合，它被拉向旋风内部更高处 5 尺（除非已在顶端）。被束缚生物随旋风移动，法术结束时坠落。</p><p>被束缚生物可以用动作进行力量或敏捷检定对抗你的法术 DC。若成功，不再被束缚，并被甩出旋风 3d6 × 10 尺，方向随机。</p>',
    scaling: '无',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 幻术系 (Illusion)
  // ==========================================
  {
    id: 'mirage_arcane',
    name: '海市蜃楼',
    level: 7,
    school: 'illusion',
    ritual: false,
    castingTime: '10 分钟',
    range: '视线',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '10 天',
    target: '1英里见方区域',
    attackType: 'none',
    description: '<p>你使方圆 1 英里内的地形在视觉、听觉、嗅觉甚至触觉上看起来像另一种地形。地形的大致形状保持不变。开阔的田野或道路可以变成沼泽、山丘、裂缝或其他困难或无法通行的地形。池塘可以看起来像草地，悬崖像缓坡，布满岩石的沟壑像宽阔平坦的道路。</p><p>同样，你可以改变建筑物的外观，或在没有建筑物的地方添加它们。该法术不能伪装、隐藏或添加生物。</p><p>这种幻觉包括听觉、视觉、触觉和嗅觉要素，因此它可以将平地变成困难地形（反之亦然），或以其他方式阻碍通过该区域的移动。任何被移出法术区域的幻觉地形部分（如岩石或树枝）会立即消失。</p><p>拥有<i>真实视觉 (Truesight)</i> 的生物可以看穿幻觉，看到地形的真实形态；然而，幻觉的其他要素仍然存在，因此虽然该生物意识到幻觉的存在，但它仍然可以与幻觉进行物理互动（例如攀爬幻觉中的树木）。</p>',
    scaling: '无',
    classes: ['bard', 'druid', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'project_image',
    name: '投影术',
    level: 7,
    school: 'illusion',
    ritual: false,
    castingTime: '1 动作',
    range: '500 英里',
    components: { v: true, s: true, m: '一个用价值至少 5 gp 的材料制成的你自己的微型复制品' },
    concentration: true,
    duration: '1 天',
    target: '创造一个幻象',
    attackType: 'none',
    description: '<p>你创造出一个持续至法术结束的你自己的幻象复制品。复制品可以出现在射程内任何你曾经见过的地方，无视中间的障碍物。幻象看起来和听起来都像你，但是无实体的。如果幻象受到任何伤害，它会消失，法术结束。</p><p>你可以用动作让幻象移动至多两倍于你速度的距离，并让它做手势、说话和以你选择的任何方式行事。它能完美模仿你的举止。</p><p>你可以通过幻象的眼睛看，通过它的耳朵听，如同你在它的位置一样。在你的回合，你可以用附赠动作在它是感官和你的感官之间切换。当你使用它的感官时，你对自己周围的环境视为目盲和耳聋。</p><p>与影像进行的物理互动会揭穿幻觉，因为物体可以直接穿过影像。一个生物可以使用其动作检查影像，并通过一次成功的智力（调查）检定对抗你的法术 DC 来断定它是幻觉。如果生物识破了幻觉，它可以看穿影像，且影像发出的任何声音听起来都很空洞。</p>',
    scaling: '无',
    classes: ['bard', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'simulacrum',
    name: '拟像术',
    level: 7,
    school: 'illusion',
    ritual: false,
    castingTime: '12 小时',
    range: '触及',
    components: { v: true, s: true, m: '足以制成受术生物等身大小复制品的冰雪；置于冰雪内部的该生物的毛发、指甲或其他身体部分；以及价值 1,500 gp 的红宝石粉末，撒在复制品上，法术会消耗掉' },
    concentration: false,
    duration: '永久',
    target: '一个野兽或类人生物',
    attackType: 'none',
    description: '<p>你在整个施法过程中塑造射程内一个野兽或类人生物的幻象复制品。复制品是一个半真实的生物，由冰雪构成，它可以采取动作并像正常生物一样受影响。它看起来与原生物一模一样，但其生命值上限只有原生物的一半，且形成时没有任何装备。除此之外，拟像使用被复制生物的所有统计数据，除了它属于构装体。</p><p>拟像对你和你指定的生物友善。它服从你的口头命令，根据你的意愿移动和行动，并在战斗中于你的回合行动。拟像缺乏学习或变强的能力，因此它永远不会提升等级或获得其他能力，也无法恢复消耗掉的法术位。</p><p>如果拟像受损，你可以在炼金实验室中修复它，每恢复 1 点生命值需消耗价值 100 gp 的稀有草药和矿物。拟像持续存在直到生命值降至 0，此时它变回冰雪并瞬间融化。</p><p>如果你再次施展此法术，你用此法术创造的任何当前活跃的复制品都会立即被摧毁。</p>',
    scaling: '无',
    classes: ['wizard'],
    cantripScaling: false
  },

  // ==========================================
  // 死灵系 (Necromancy)
  // ==========================================
  {
    id: 'finger_of_death',
    name: '死亡一指',
    level: 7,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 动作',
    range: '60 尺',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '立即',
    target: '一个生物',
    attackType: 'save',
    saveAttr: 'con',
    damage: '7d8+30',
    damageType: 'necrotic',
    description: '<p>你发出一道负能量流，穿过射程内一个你可见的生物，使其感到剧痛。目标必须进行体质豁免。失败者受到 7d8 + 30 点黯蚀伤害，成功者减半。</p><p>如果这个法术杀死了一个类人生物，该生物会在你的下个回合开始时作为一只<b>僵尸 (Zombie)</b> 复活。它将永久受你指挥，并尽其所能服从你的口头命令。</p>',
    scaling: '无',
    classes: ['sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'resurrection',
    name: '复生术',
    level: 7,
    school: 'necromancy',
    ritual: false,
    castingTime: '1 小时',
    range: '触及',
    components: { v: true, s: true, m: '一颗价值至少 1,000 gp 的钻石，法术会消耗掉' },
    concentration: false,
    duration: '立即',
    target: '一具尸体',
    attackType: 'none',
    description: '<p>你触碰一个死亡时间不超过一个世纪的死亡生物，前提是它并非死于年老，且非不死生物。如果其灵魂自由且自愿，目标以满生命值复活。</p><p>该法术会中和目标死时受到的任何毒素，并治愈普通疾病。但它无法移除魔法疾病、诅咒及类似效果；如果在施法前未移除这些效果，目标复活后仍会受其影响。</p><p>该法术会愈合所有致命伤口，并恢复任何缺失的身体部位。</p><p>从死亡中归来是一个痛苦的考验。目标在所有的攻击检定、豁免检定和属性检定中承受 -4 减值。每当目标完成一次长休，减值减少 1，直到消失。</p><p>施展此法术复活一个死亡一年或更久的生物会极大地消耗你的精力。在你完成一次长休前，你无法再次施法，且你在所有的攻击检定、属性检定和豁免检定中具有劣势。</p>',
    scaling: '无',
    classes: ['bard', 'cleric'],
    cantripScaling: false
  },

  // ==========================================
  // 变化系 (Transmutation)
  // ==========================================
  {
    id: 'draconic_transformation',
    name: '巨龙转化',
    level: 7,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 附赠动作',
    range: '自身',
    components: { v: true, s: true, m: '一尊龙的雕像，价值至少 500 gp' },
    concentration: true,
    duration: '1 分钟',
    target: '自身',
    attackType: 'save',
    saveAttr: 'dex', // 喷吐武器
    damage: '6d8', // 喷吐武器
    damageType: 'force',
    description: '<p>伴随着一声咆哮，你汲取巨龙的魔力来转化自己，获得巨龙的特征。直到法术结束，你获得以下增益：</p><ul><li><b>盲视 (Blindsight)</b>：你获得 30 尺范围的盲视。在此范围内，只要未被全掩护遮挡，你可以有效地看到任何东西，即便你处于目盲或黑暗中。此外，你可以看到隐形的生物，除非该生物成功对你躲藏。</li><li><b>喷吐武器 (Breath Weapon)</b>：当你施展此法术时，以及在法术持续期间的后续回合用附赠动作，你可以呼出闪烁的能量，覆盖 60 尺锥状区域。区域内的每个生物必须进行敏捷豁免，失败受 6d8 力场伤害，成功减半。</li><li><b>双翼 (Wings)</b>：虚幻的翅膀从你背部生出，给予你 60 尺飞行速度。</li></ul>',
    scaling: '无',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'etherealness',
    name: '以太化',
    level: 7,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '自身',
    components: { v: true, s: true, m: null },
    concentration: false,
    duration: '8 小时',
    target: '自身',
    attackType: 'none',
    description: '<p>你步入以太位面与你当前所在位面重叠的边界区域。在法术持续期间或直到你用动作解消法术前，你均处于以太边界。在此期间，你可以向任意方向移动。如果你上下移动，每移动 1 尺需消耗额外 1 尺移动力。你可以看到和听到你原先所在的位面，但那里的一切看起来都是灰色的，且你无法看清 60 尺以外的事物。</p><p>在以太位面时，你只能影响该位面的其他生物或受其影响。不在以太位面的生物无法感知你或与你互动，除非通过特殊能力或魔法。</p><p>你无视所有不在以太位面的物体和效果，这允许你穿过原位面上的物体移动。</p><p>法术结束时，你立即回到原位面你当前占据的位置。如果该位置被固体物体或生物占据，你会被立即推送到最近的未被占据空间，并受到力场伤害，数值为你被移动距离英尺数的两倍。</p><p>如果你在施法时已处于以太位面或不与以太位面接壤的位面（如外层位面），此法术无效。</p>',
    scaling: '当你使用 8 环或更高环阶的法术位施展此法术时，每比 7 环高一环，你可以多指定三个自愿生物（包括你）作为目标。施法时这些生物必须在你周围 10 尺内。',
    classes: ['bard', 'cleric', 'sorcerer', 'warlock', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'regenerate',
    name: '再生术',
    level: 7,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 分钟',
    range: '触及',
    components: { v: true, s: true, m: '一个转经筒和圣水' },
    concentration: false,
    duration: '1 小时',
    target: '一个生物',
    attackType: 'none',
    damage: '4d8+15', // 初始治疗
    description: '<p>你触碰一个生物并刺激其自然愈合能力。目标恢复 4d8 + 15 点生命值。在法术持续期间，目标在它的每回合开始时恢复 1 点生命值（每分钟 10 点）。</p><p>如果目标有断裂的身体部位（手指、腿、尾巴等），这些部位会在 2 分钟后再生。如果你持有断肢并将其接在断口处，法术会瞬间让断肢重新接合。</p>',
    scaling: '无',
    classes: ['bard', 'cleric', 'druid'],
    cantripScaling: false
  },
  {
    id: 'reverse_gravity',
    name: '反重力',
    level: 7,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '100 尺',
    components: { v: true, s: true, m: '一块天然磁石和铁屑' },
    concentration: true,
    duration: '1 分钟',
    target: '50尺半径圆柱体',
    attackType: 'save',
    saveAttr: 'dex',
    description: '<p>该法术反转射程内以一点为中心，半径 50 尺、高 100 尺圆柱形区域内的重力。区域内所有未被固定在地面上的生物和物体会向下跌落（实际上是向上），直至到达区域顶部。生物可以进行敏捷豁免以抓住固定的物体，从而避免跌落。</p><p>如果在跌落过程中遇到固体物体（如天花板），跌落的物体和生物会像正常向下坠落一样撞击它。如果物体或生物到达区域顶部且未撞击任何东西，它会停留在那里，并在法术持续期间微微摆动。</p><p>法术结束时，受影响的物体和生物会再次坠落回地面。</p>',
    scaling: '无',
    classes: ['druid', 'sorcerer', 'wizard'],
    cantripScaling: false
  },
  {
    id: 'sequester',
    name: '隔离术',
    level: 7,
    school: 'transmutation',
    ritual: false,
    castingTime: '1 动作',
    range: '触及',
    components: { v: true, s: true, m: '由钻石、祖母绿、红宝石和蓝宝石研磨成的粉末，价值至少 5,000 gp，法术会消耗掉' },
    concentration: false,
    duration: '永久',
    target: '一个自愿生物或物体',
    attackType: 'none',
    description: '<p>通过此法术，一个自愿生物或物体可以被隐藏起来，在法术持续期间无法被侦测。当你施展法术并触碰目标时，它变得隐形，且无法被预言系法术瞄准，也无法被预言法术创造的探知传感器感知。</p><p>如果目标是生物，它进入假死状态。时间对它停止流动，它不会变老。</p><p>你可以设定法术提前结束的条件。条件可以是任何你选择的事情，但必须在目标周围 1 英里内发生或可见。例如“一千年后”或“当塔拉斯克巨兽苏醒时”。如果目标受到任何伤害，法术也会结束。</p>',
    scaling: '无',
    classes: ['wizard'],
    cantripScaling: false
  },
];